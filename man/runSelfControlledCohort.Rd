% Generated by roxygen2 (4.1.1): do not edit by hand
% Please edit documentation in R/SelfControlledCohort.R
\name{runSelfControlledCohort}
\alias{runSelfControlledCohort}
\title{Run self-controlled cohort}
\usage{
runSelfControlledCohort(connectionDetails, cdmDatabaseSchema, cdmVersion = 5,
  oracleTempSchema, exposureIds, outcomeId,
  exposureDatabaseSchema = cdmDatabaseSchema, exposureTable = "drug_era",
  outcomeDatabaseSchema = cdmDatabaseSchema, outcomeTable = "condition_era",
  firstOccurrenceDrugOnly = TRUE, firstOccurrenceConditionOnly = TRUE,
  outcomeConditionTypeConceptIds = c(38000247), genderConceptIds = c(8507,
  8532), minAge = "", maxAge = "", studyStartDate = "",
  studyEndDate = "", stratifyByGender = FALSE, stratifyByAge = FALSE,
  stratifyByYear = FALSE, useLengthOfExposureExposed = TRUE,
  timeAtRiskExposedStart = 1, surveillanceExposed = 30,
  useLengthOfExposureUnexposed = TRUE, timeAtRiskUnexposedStart = -1,
  surveillanceUnexposed = -30, hasFullTimeAtRisk = FALSE,
  washoutWindow = 0, followupWindow = 0, shrinkage = 1e-04)
}
\arguments{
\item{connectionDetails}{An R object of type \code{connectionDetails} created using
the function \code{createConnectionDetails} in the
\code{DatabaseConnector} package.}

\item{cdmDatabaseSchema}{Name of database schema that contains the OMOP CDM and
vocabulary.}

\item{cdmVersion}{Define the OMOP CDM version used: currently support "4" and
"5".}

\item{oracleTempSchema}{For Oracle only: the name of the database schema where you
want all temporary tables to be managed. Requires
create/insert permissions to this database.}

\item{exposureIds}{A vector containing the drug_concept_ids or
cohort_definition_ids of the exposures of interest}

\item{outcomeId}{The condition_concept_id or cohort_definition_id of the
outcome of interest}

\item{exposureDatabaseSchema}{The name of the database schema that is the location where
                                        the exposure data used to define the exposure cohorts is
                                        available. If exposureTable = DRUG_ERA,
                                        exposureDatabaseSchema is not used by assumed to be
                                        cdmSchema.  Requires read permissions to this database.}

\item{exposureTable}{The tablename that contains the exposure cohorts.  If
exposureTable <> DRUG_ERA, then expectation is exposureTable
has format of COHORT table: cohort_concept_id, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.}

\item{outcomeDatabaseSchema}{The name of the database schema that is the location where
the data used to define the outcome cohorts is available. If
exposureTable = CONDITION_ERA, exposureDatabaseSchema is not
used by assumed to be cdmSchema.  Requires read permissions
to this database.}

\item{outcomeTable}{The tablename that contains the outcome cohorts.  If
outcomeTable <> CONDITION_OCCURRENCE, then expectation is
outcomeTable has format of COHORT table:
COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE,
COHORT_END_DATE.}

\item{firstOccurrenceDrugOnly}{If TRUE, only use first occurrence of each drug concept id
for each person}

\item{firstOccurrenceConditionOnly}{If TRUE, only use first occurrence of each condition concept
id for each person.}

\item{outcomeConditionTypeConceptIds}{A list of TYPE_CONCEPT_ID values that will restrict
condition occurrences.  Only applicable if outcomeTable =
CONDITION_OCCURRENCE.}

\item{genderConceptIds}{of gender_concept_id, generally use MALE (8507) and FEMALE
(8532).}

\item{minAge}{Integer for minimum allowable age.}

\item{maxAge}{Integer for maximum allowable age.}

\item{studyStartDate}{Date for minimum allowable data for index exposure. Date format is 'yyyymmdd'.}

\item{studyEndDate}{Date for maximum allowable data for index exposure. Date format is 'yyyymmdd'.}

\item{stratifyByGender}{If TRUE, analysis will be calculated overall, and stratified
across all gender groups.}

\item{stratifyByAge}{If TRUE, analysis will be calculated overall, and stratified
across all age groups (using AGE_GROUP table below).}

\item{stratifyByYear}{If TRUE, analysis will be calculated overall, and stratified
across all years of the index dates.}

\item{useLengthOfExposureExposed}{If TRUE, use the duration from drugEraStart -> drugEraEnd as
part of timeAtRisk.}

\item{timeAtRiskExposedStart}{Integer of days to add to drugEraStart for start of
timeAtRisk (0 to include index date, 1 to start the day
after).}

\item{surveillanceExposed}{Additional window to add to end of exposure period (if
useLengthOfExposureExposed = TRUE, then add to exposure end
date, else add to exposure start date).}

\item{useLengthOfExposureUnexposed}{If TRUE, use the duration from exposure start -> exposure
end as part of timeAtRisk looking back before exposure
start.}

\item{timeAtRiskUnexposedStart}{Integer of days to add to exposure start for start of
timeAtRisk (0 to include index date, -1 to start the day
before).}

\item{surveillanceUnexposed}{Additional window to add to end of exposure period (if
useLengthOfExposureUnexposed = TRUE, then add to exposure
end date, else add to exposure start date).}

\item{hasFullTimeAtRisk}{If TRUE, restrict to people who have full time-at-risk
exposed and unexposed.}

\item{washoutWindow}{Integer to define required time observed before exposure
start.}

\item{followupWindow}{Integer to define required time observed after exposure
start.}

\item{shrinkage}{Shrinkage used in IRR calculations, required >0 to deal with
                                        0 case counts, but larger number means more shrinkage.}
}
\value{
An object of type \code{sccResults} containing the results of the analysis.
}
\description{
\code{runSelfControlledCohort} generates population-level estimation by comparing exposed and unexposed time among
exposed cohort.
}
\details{
Population-level estimation method that estimates incidence rate comparison of exposed/unexposed
time within an exposed cohort.
}
\examples{
\dontrun{
connectionDetails <- createConnectionDetails(dbms = "sql server",
                                             server = "RNDUSRDHIT07.jnj.com")
sccResult <- runSelfControlledCohort(connectionDetails,
                    cdmDatabaseSchema = "cdm_truven_mdcr.dbo",
                    exposureIds = c(767410, 1314924, 907879),
                    outcomeId = 444382,
                    outcomeTable = "condition_era")
}
}
\references{
Ryan PB, Schuemie MJ, Madigan D.Empirical performance of a self-controlled cohort method: lessons
for developing a risk identification and analysis system. Drug Safety 36 Suppl1:S95-106, 2013
}

